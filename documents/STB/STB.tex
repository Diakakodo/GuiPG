\documentclass{../res/univ-projet}

%Import des packages utilisés pour le document
\usepackage[utf8x]{inputenc}
\usepackage[francais]{babel}
\usepackage[T1]{fontenc}
%\usepackage{array}
%\usepackage{hyperref}
%\usepackage{tabularx, longtable}
%\usepackage[table]{xcolor}
%\usepackage{fancyhdr}
%\usepackage{lastpage}
\usepackage{../res/tikz-uml}
\usepackage{tikz}
\usepackage{calc}
\usepackage{xstring}
\usepackage{pgfopts}

\definecolor{gris}{rgb}{0.95, 0.95, 0.95}

%Redéfinition des marges
%\addtolength{\hoffset}{-2cm}
%\addtolength{\textwidth}{4cm}
\addtolength{\topmargin}{-1cm}
\addtolength{\textheight}{1cm}
\addtolength{\headsep}{0.8cm} 
\addtolength{\footskip}{-0.2cm}


%Import page de garde et structures pour la gestion de projet
%\usepackage{structures}

%Variables
\logo{../res/logo_univ.png}
\title{Spécification Technique de Besoin}
\author{Bertille \bsc{Bouillie}, Lucas \bsc{Barbay}, Olivier \bsc{Thibault}}
\projet{Projet PGP}
\projdesc{Étude et implantation d'un outil graphique de gestion de clefs PGP}
\filiere{Master 1 SSI }
\matiere{Conduite de projet}
\version{1.0}
\relecteur{Matthieu \bsc{Fin}, Pierre \bsc{Balmelle}}
\signataire{Magali \bsc{Bardet}}
\date{\today}

\histentry{1.0}{24/04/2015}{Correction de la STB final suite aux dernières négociations avec le client.}
\histentry{0.5}{16/04/2015}{Révision de certaines parties du projet avec l'accord du client.}
\histentry{0.4}{08/12/2014}{Complétion de la section ``Objet`` + ajout des modifications demandées par le client.}
\histentry{0.3}{17/11/2014}{Ajout des modifications demandées par le client.}
\histentry{0.2}{09/11/2014}{Ajout des exigences.}
\histentry{0.1}{31/10/2014}{Version initiale.}

% -- Début du document -- %
\begin{document}

%Page de garde
\maketitle
\newpage
%La table des matières
\tableofcontents

\newpage

\section{Objet}

% Présentation succinte du sujet et hyp de travail.
Le document présent est la spécification technique de besoin d'une étude et implantation d'un outil graphique de gestion de clefs PGP.

Le projet est réalisé par une équipe de sept étudiants du master Sécurité des Systèmes Informatiques (SSI) de Rouen, pour le compte de Madame Magali BARDET responsable de ce même master. 

L'objectif du projet est d'effectuer une étude complète d'OpenPGP et du logiciel GnuPG, d'en comprendre le fonctionnement détaillé afin de rédiger un rapport illustrant toutes les fonctionnalités.

Il est ensuite demandé de proposer une interface graphique pour GnuPG, accompagnée d'un document d'explications et de recommandations pour l'utilisateur.

Enfin, il est demandé d'implanter une attaque sur les identifiants de clefs PGP et de l'expliquer en détail.

\subsection{Besoins opérationnels}
L'interface graphique doit offrir la possibilité de mettre en place sa toile de confiance et de la visualiser. Le but étant de faciliter l'utilisation de GnuPG par le biais de l'interface. De plus, elle doit permettre à l'utilisateur de gérer plusieurs trousseaux de clefs simultanément.

L'interface devra donc être à la fois pédagogique et précise, notamment en ce qui concerne la partie toile de confiance, où le but est de faire comprendre un concept essentiel de PGP.

\subsection{Objectifs techniques}

Les objectifs techniques de l'interface graphique pour GnuPG sont de:
\begin{itemize}
 \item permettre la gestion des clefs : lister les objets du trousseau, créer, importer, exporter des clefs;
 \item pouvoir gérer la toile de confiance : signer et modifier la confiance des clefs;
 \item permettre le chiffrement, déchiffrement et la vérification de fichier;
 \item mettre en évidence les lignes de commande GnuPG correspondantes aux actions lancées.
\end{itemize}

\subsection{Contraintes et recommandations}

L'application doit fonctionner sous Linux en environnements KDE et Gnome.

\subsection{Résultats attendus}
Les livrables attendus pour ce projet sont :
\begin{itemize}
 \item Un rapport complet sur GnuPG et OpenPGP illustrant toutes les fonctionnalités.
 \item Une interface graphique pour GnuPG.
 \item Un document d'explications et de recommandations à l'utilisation de l'interface graphique.
 \item Une implémentation de l'attaque sur les identifiants de clefs PGP telle que celle décrite dans l'article «Surveillance généralisée : aux limites de PGP» du numéro 75 du magazine MISC.
\end{itemize}

\section{Documents applicables et de référence}
% Liste des
% - Références des documents quidefinissent formellement les principes
%   directeurs et le hypothèse de travail prise en compte pour l'établissement de la spécification.
% - Références des documents cités dans la STB au titre d'explication ou de justification.
Différents documents de référence :
\begin{itemize}
\item Définitions du standard OpenPGP :
  \begin{itemize}
    \item RFC 4880 : \href{http://tools.ietf.org/html/rfc4880}{http://tools.ietf.org/html/rfc4880}.
    \item RFC 2240 : \href{http://abcdrfc.free.fr/rfc-vf/pdf/rfc2440.pdf}{http://abcdrfc.free.fr/rfc-vf/pdf/rfc2440.pdf}.
  \end{itemize}
\item Le guide de référence de GnuPG : \href{https://www.gnupg.org/gph/fr/manual.html}{https://www.gnupg.org/gph/fr/manual.html}.
\item KGpg, une interface graphique existante : \href{https://utils.kde.org/projects/kgpg/}{https://utils.kde.org/projects/kgpg/}.
\item Exemple de visualisation d'une toile de confiance sous forme de graphe sur le site de Archlinux : \\
  \href{https://www.archlinux.org/master-keys/#visualization}{https://www.archlinux.org/master-keys/\#visualization}.
\item Code source de l'attaque décrite dans le magazine MISC n°75 : \\ 
\href{https://github.com/micahflee/trollwot/blob/master/bruteforce_keyid}{https://github.com/micahflee/trollwot/blob/master/bruteforce\_keyid}.
\end{itemize}


\section{Exigences fonctionnelles}
\subsection{Présentation de la mission du produit logiciel}

\subsubsection{Diagramme des cas d'utilisation}

\begin{tikzpicture}

\umlactor[x=6]{Utilisateur}

\begin{umlsystem}[fill=red!10]{Interface graphique}
 \umlusecase[y=8.5, width=3cm]{Créer un profil utilisateur}
 \umlusecase[y=6.5, width=3cm]{Éditer un profil utilisateur}
 \umlusecase[y=4.5, width=3cm]{Supprimer un profil utilisateur}
 \umlusecase[y=3, width=3cm]{Charger un profil utilisateur}
 \umlusecase[y=1, width=3cm]{Choisir un profil utilisateur par défaut}
 \umlusecase[y=-1, width=3cm]{Gérer simultanément plusieurs trousseaux de clefs}
 \umlusecase[y=-2.9, width=3cm]{Lister le contenu d'un trousseau de clefs}
 \umlusecase[y=-4.6, width=3cm]{Générer une paire de clefs}
 \umlusecase[y=-6.5, width=3cm]{Importer une ou plusieurs clefs depuis un fichier}
 \umlusecase[y=-8.5, width=3cm]{Exporter une ou toutes les clefs vers un fichier}
\end{umlsystem}

\begin{umlsystem}[x=10, y=4, fill=red!10]{Interface graphique}
 \umlusecase[y=4, width=3cm]{Signer une clef principale}
 \umlusecase[y=2, width=3cm]{Modifier la confiance d'une clef principale}
 \umlusecase[y=0, width=3cm]{Ajouter une sous clef à une clef principale}
 \umlusecase[y=-2, width=3cm]{Ajouter un uid à une clef principale}
 \umlusecase[y=-4, width=3cm]{Chiffrer / Déchiffrer / Vérifier un fichier}
 \umlusecase[y=-6, width=3cm]{Afficher les commandes exécutées, les retours et les erreurs de GPG}
\end{umlsystem}

\begin{umlsystem}[x=10, fill=red!10]{Attaque sur les KeyId}
 \umlusecase[y=-6, width=3cm]{Calcul d'une seconde pré image pour une clef donnée}
\end{umlsystem}

\umlassoc{Utilisateur}{usecase-1}
\umlassoc{Utilisateur}{usecase-2}
\umlassoc{Utilisateur}{usecase-3}
\umlassoc{Utilisateur}{usecase-4}
\umlassoc{Utilisateur}{usecase-5}
\umlassoc{Utilisateur}{usecase-6}
\umlassoc{Utilisateur}{usecase-7}
\umlassoc{Utilisateur}{usecase-8}
\umlassoc{Utilisateur}{usecase-9}
\umlassoc{Utilisateur}{usecase-10}
\umlassoc{Utilisateur}{usecase-11}
\umlassoc{Utilisateur}{usecase-12}
\umlassoc{Utilisateur}{usecase-13}
\umlassoc{Utilisateur}{usecase-14}
\umlassoc{Utilisateur}{usecase-15}
\umlassoc{Utilisateur}{usecase-16}
\umlassoc{Utilisateur}{usecase-17}

\end{tikzpicture}

\subsubsection{Interface graphique}

\begin{tabular}{|>{\centering}p{1cm}|>{}p{8,5cm}|>{\centering}p{2cm}|>{\centering}p{2cm}|}
  \hline
  \color{white}\cellcolor{blue}\bfseries{Id}&
  \color{white}\cellcolor{blue}\bfseries{Intitulé}&
  \color{white}\cellcolor{blue}\bfseries{Acteur(s)}&
  \color{white}\cellcolor{blue}\bfseries{Priorité}\\
  \cr
  \hline
  EF\_1&
  Créer un profil utilisateur&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_2&
  Éditer un profil utilisateur&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_3&
  Supprimer un profil utilisateur&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_4&
  Charger un profil utilisateur&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_5&
  Choisir un profil par défaut&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_6&
  Gérer simultanément plusieurs trousseaux de clefs&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_7&
  Lister le contenu d'un trousseau de clefs&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_8&
  Générer une paire de clefs&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_9&
  Importer une ou plusieurs clefs depuis un fichier&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_10&
  Exporter une ou toutes les clefs vers un fichier&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_11&
  Signer une clef principale&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_12&
  Modifier la confiance d'une clef principale&
  Utilisateur&
  Indispensable
  \cr
  \hline
  EF\_13&
  Ajouter une sous clef à une clef principale&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_14&
  Ajouter un uid à une clef principale&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_15&
  Chiffrer / Déchiffrer / Vérifier un fichier&
  Utilisateur&
  Important
  \cr
  \hline
  EF\_16&
  Afficher les commandes exécutées, les retours et les erreurs de GPG.&
  Utilisateur&
  Indispensable
  \cr
  \hline
\end{tabular}\\

\subsubsection{Attaque sur les KeyId}
\begin{tabular}{|>{\centering}p{1cm}|>{}p{8,5cm}|>{\centering}p{2cm}|>{\centering}p{2cm}|}
  \hline
  \color{white}\cellcolor{blue}\bfseries{Id}&
  \color{white}\cellcolor{blue}\bfseries{Intitulé}&
  \color{white}\cellcolor{blue}\bfseries{Acteur(s)}&
  \color{white}\cellcolor{blue}\bfseries{Priorité}\\
  \cr
  \hline
  EF\_17&
  Calcul d'une seconde pré image pour une clef donnée&
  Utilisateur&
  Indispensable
  \cr
  \hline
\end{tabular}\\
\newpage

%Cas d'utilisation
\subsection{Interface graphique}

\subsubsection{Cas d'utilisation 1}
\ficheGraphic
% Nom du cas d'utilisation
{Exécution d'une actions GPG}
% Acteurs concernés
{Utilisateur}
% Description
{
  Fonctionnement du système pour chaque action nécessitant l'intervention de GPG. L'application fait interface entre l'utilisateur et GnuPG.
}
% Préconditions
{
 \begin{itemize}
  \item Un profil utilisateur est chargé.
  \item L'exécutable GnuPG enregistré dans le profil est correct.
 \end{itemize}

}
% Evénements déclenchants
{Demande d'action GPG}
% Conditions d'arrêt
{Action terminée}
% Diagramme
{0.5}{../res/graphics/Diag_Seq_Actions_GPG_v3}
% Flots d'exceptions
{Abandon de l'utilisateur ou impossibilité de lancer GnuPG.}
% Fin de la fiche du cas d'utilisation 1.
\vspace{0.5cm}

Exigences fonctionnelles concernées :
\begin{itemize}
 \item EF\_7;
 \item EF\_8;
 \item EF\_9;
 \item EF\_10;
 \item EF\_11;
 \item EF\_12;
 \item EF\_13;
 \item EF\_14;
 \item EF\_15;
\end{itemize}


\subsubsection{Cas d'utilisation 2}
\fiche
% Nom du cas d'utilisation
{Signer une clef principale}
% Acteurs concernés
{Utilisateur}
% Description
{L'utilisateur peut sélectionner une clef principale (autre que la sienne) et la signer. Avant validation de l'action, l'interface doit afficher
les informations de la clef. Si l'utilisateur valide, cela signera tous les indentifiants utilisateurs associés à cette clef.
}
% Préconditions
{
  \begin{itemize}
    \item Reprend les préconditions du cas d'utilisation 1.
    \item Les objets du trousseau de clefs doivent être listés et visible.
    \item Posséder une clé principale privée non expirée et non révoquée dans son trousseau.
    \item Avoir la clef principale publique (autre que la sienne) que l'on souhaite signer.
  \end{itemize}
}
% Evénements déclenchants
{Clique sur le sous menu contextuel prévu pour cette action, via la vue du trousseau de clefs.}
% Conditions d'arrêt
{Action terminée.}
% Diagramme
{

}
{

}
% Flots d'exceptions
{Abandon de l'utilisateur ou impossibilité de lancer GnuPG.}
% Fin de la fiche du cas d'utilisation 2.
\vspace{0.5cm}

Exigences fonctionnelles concernées :
\begin{itemize}
 \item EF\_4;
 \item EF\_7;
 \item EF\_11;
 \item EF\_15;
\end{itemize}

\subsubsection{Cas d'utilisation 3}
\ficheGraphic
% Nom du cas d'utilisation
{Affichage des commandes, des retours et des erreurs GPG}
% Acteurs concernés
{Utilisateur}
% Description
{L'utilisateur peut choisir d'afficher ou non les commandes, les retours et les erreurs, associées à chaque action GPG. L'affichage des commandes et l'affichage des retours/erreurs peuvent être affichés séparément.}
% Préconditions
{}
% Evénements déclenchants
{Demande de modification de l'affichage.}
% Conditions d'arrêt
{}
% Diagramme
{0.5}{../res/graphics/Diag_Seq_Affichage_Commandes_v2}
% Flots d'exceptions
{Aucun.}   
% Fin de la fiche du cas d'utilisation 3.
\vspace{0.5cm}

\`{A} tout moment, les informations relatives à la dernière action doivent être consultables par activation de l'affichage des commandes/retours/erreurs, même si l'affichage n'était pas activé.


\subsubsection{Cas d'utilisation 4}
\ficheGraphic
% Nom du cas d'utilisation
{Choisir un profil utilisateur}
% Acteurs concernés
{Utilisateur}
% Description
{L'utilisateur peut choisir son profil au lancement de l'interface via l'option \texttt{-P}, ou en cours d'utilisation. Si au lancement l'option \texttt{-P} n'est pas précisée, et qu'aucun profil par défaut n'est défini, l'utilisateur doit choisir un profil. Lors de l'installation, un profil par défaut est créé.}
% Préconditions
{Un fichier de configuration de l'interface doit contenir les différents profils, ainsi que l'éventuel profil par défaut. 
Un profil a un nom et connait le chemin vers le trousseau de clefs a utilisé ainsi que le chemin vers l'exécutable GnuPG.}
% Evénements déclenchants
{Ouverture avec option spécifiée, ouverture sans profil par défaut, ou changement de profil en cours d'utilisation.}
% Conditions d'arrêt
{Profil chargé}
% Diagramme
{0.5}{../res/graphics/Diag_Seq_Config}
% Flots d'exceptions
{Abandon de l'utilisateur.}
% Fin de la fiche du cas d'utilisation 4.
\vspace{0.5cm}


\subsubsection{Cas d'utilisation 5}
\ficheGraphic
% Nom du cas d'utilisation
{Modifier la confiance d'une clef principale publique}         
% Acteurs concernés
{Utilisateur}
% Description
{L'utilisateur doit pouvoir sélectionner une clef principale publique afin de modifier la confiance qu'il lui accorde. 
Il pourra choisir le niveau de confiance voulu seulement parmis une liste prédéfinit par l'interface.
}
% Préconditions
{
\begin{itemize}
 \item Reprend les préconditions du cas d'utilisation 2.
 \item L'utilisateur doit avoir signé la clef qu'il souhaite modifier.
\end{itemize}

}
% Evénements déclenchants
{Clique sur le sous menu contextuel prévue pour cette action, via la vue du trousseau de clefs.}
% Conditions d'arrêt
{Sauvegarde et mise à jour de l'affichage terminées.}
% Diagramme
{0.5}{../res/graphics/Diag_Seq_Toile}
% Flots d'exceptions
{Abandon de l'utilisateur ou impossibilité de lancer GnuPG.}                      
% Fin de la fiche du cas d'utilisation 5.
\vspace{0.5cm}
  

\subsection{Calcul d'une seconde pré image pour une clef donnée}
  
\subsubsection{Cas d'utilisation 6}
\ficheGraphic
% Nom du cas d'utilisation
{Calcul d'une seconde pré image pour une clef donnée}
% Acteurs concernés
{Utilisateur}
% Description
{Calcul d'une seconde pré image sur 4 octets, selon la méthode décrite dans le numéro 75 du MISC, dans l'article à propos de l'attaque sur les KeyId.}
% Préconditions
{Fixer une clef.}
% Evénements déclenchants
{Lancement du calcul.}
% Conditions d'arrêt
{Seconde pré image trouvée.}
% Diagramme
{0.5}{../res/graphics/Diag_Seq_Attaque}
% Flots d'exceptions
{}
% Fin de la fiche du cas d'utilisation 6.
\vspace{0.5cm}


\subsection{Rapport complet de l'étude de GnuPG}

Le rapport doit énumérer la liste complète des commandes GPG et les expliquer, ainsi que décrire le fonctionnement de GnuPG.


\subsection{Document d'explications et de recommandations à l'utilisation de l'interface graphique}

Le document d'explications et de recommandations doit permettre à un utilisateur d'utiliser facilement les commandes GPG sur l'interface.

\newpage

\section{Exigences opérationnelles}

\begin{tabular}{|>{\centering}p{1cm}|>{}p{11,5cm}|>{\centering}p{2cm}|}
  \hline
  \color{white}\cellcolor{blue}\bfseries{Id}&
  \color{white}\cellcolor{blue}\bfseries{Intitulé}&
  \color{white}\cellcolor{blue}\bfseries{Priorité}\\
  \cr
  \hline
  EO\_1&
  Compatibilité GnuPG 2.0.*&
  Indispensable
  \cr
  \hline
  EO\_2&
  Compatibilité GnuPG 1.4.*&
  Important
  \cr
  \hline
  EO\_3&
  Compatibilité GnuPG 2.1.0&
  Secondaire
  \cr
  \hline
  EO\_4&
  Fonctionnement sous KDE 4.* et 5&
  Indispensable
  \cr
  \hline
  EO\_5&
  Fonctionnement sous Gnome 3.*&
  Important
  %\cr
  %\hline
  %EO\_6&
  %Fonctionnement sous Windows&
  %Secondaire
  \cr
  \hline
  EO\_6&
  Visualisation de la Toile de confiance (non sous forme de graphe)&
  Indispensable
  \cr
  \hline
  EO\_7&
  Ouverture de deux interfaces graphiques avec des profils différents simultanément&
  Important
  \cr
  \hline
  EO\_8&
  Connexion SSH : Authentification via une clef signée par GPG&
  Secondaire
  \cr
  \hline
  EO\_9&
  Recherche des clefs en local&
  Important
  \cr
  \hline
  EO\_10&
  Choix du logiciel comme logiciel par défaut pour PGP&
  Secondaire
  \cr
  \hline
  EO\_11&
  Choix des couleurs pour les niveaux de confiance et de validité&
  Secondaire
  \cr
  \hline
  EO\_12&
  Fonctionnement sous Windows&
  Secondaire
  \cr
  \hline
\end{tabular}\\



\section{Exigences opérationnelles d'interface}

Le client n'a aucune exigence opérationnelle d'interface.


\section{Exigences de qualité}

\begin{tabular}{|>{\centering}p{1cm}|>{}p{11,5cm}|>{\centering}p{2cm}|}
  \hline
  \color{white}\cellcolor{blue}\bfseries{Id}&
  \color{white}\cellcolor{blue}\bfseries{Intitulé}&
  \color{white}\cellcolor{blue}\bfseries{Priorité}\\
  \cr
  \hline
  EQ\_1&
  Représentation des niveaux de confiance et de validité par couleurs&
  Indispensable
  \cr
  \hline
  EQ\_2&
  Temps d'exécution pour l'interface : < temps d'exécution GPG + 100 ms&
  Important
  \cr
  \hline
  EQ\_3&
  Interface livrée sous forme de paquet Ubuntu&
  Important
  \cr
  \hline
  EQ\_4&
  Les pass phrases ne sont jamais affichées en clair&
  Indispensable
  \cr
  \hline
\end{tabular}\\

\section{Exigences de réalisation}

Le client recevra un livrable final qui contiendra :
\begin{itemize}
\item L'interface graphique pour GnuPG.
\item L'étude de GnuPG
\item L'implantation de l'attaque sur les identifiants de clefs PGP.
\end{itemize}


\end{document}

